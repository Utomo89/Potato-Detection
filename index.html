<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Deteksi Penyakit Daun Kentang - AgriDetect</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />

    <!-- Konfigurasi Tailwind CSS -->
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: {
                50: "#f0fdf4",
                100: "#dcfce7",
                500: "#22c55e",
                600: "#16a34a",
                700: "#15803d",
                800: "#166534",
                900: "#14532d",
              },
            },
            fontFamily: {
              inter: ["Inter", "sans-serif"],
            },
            boxShadow: {
              soft: "0 4px 20px -2px rgba(0, 0, 0, 0.1)",
              medium: "0 8px 30px -6px rgba(0, 0, 0, 0.15)",
            },
            animation: {
              "fade-in": "fadeIn 0.5s ease-in-out",
              "slide-up": "slideUp 0.5s ease-out",
            },
            keyframes: {
              fadeIn: {
                "0%": { opacity: "0" },
                "100%": { opacity: "1" },
              },
              slideUp: {
                "0%": { transform: "translateY(20px)", opacity: "0" },
                "100%": { transform: "translateY(0)", opacity: "1" },
              },
            },
          },
        },
      };
    </script>
  </head>
  <body
    class="min-h-screen bg-gradient-to-br from-primary-50 to-white font-inter"
  >
    <!-- Header -->
    <header
      class="bg-gradient-to-r from-primary-700 to-primary-800 text-white py-4 shadow-lg sticky top-0 z-50"
    >
      <div class="max-w-6xl mx-auto px-4 flex justify-between items-center">
        <div class="flex items-center space-x-3">
          <div class="bg-white/20 p-2 rounded-xl">
            <i class="fas fa-leaf text-xl text-white"></i>
          </div>
          <h1 class="text-xl font-bold tracking-tight">AgriDetect</h1>
        </div>
      </div>
    </header>

    <!-- Hero Section -->
    <section class="max-w-6xl mx-auto py-12 px-4">
      <div class="text-center mb-12 animate-fade-in">
        <h1
          class="text-4xl md:text-5xl font-bold text-primary-800 mb-4 leading-tight"
        >
          Deteksi Penyakit Daun Kentang
        </h1>
        <p class="text-lg text-gray-600 max-w-2xl mx-auto leading-relaxed">
          Gunakan teknologi AI canggih untuk mendiagnosis kesehatan tanaman
          kentang Anda dengan akurasi tinggi dan rekomendasi penanganan
        </p>
      </div>

      <!-- Form Upload -->
      <div
        class="bg-white rounded-2xl shadow-soft overflow-hidden max-w-2xl mx-auto transition-all duration-300 hover:shadow-medium animate-slide-up"
      >
        <div
          class="bg-gradient-to-r from-primary-600 to-primary-700 text-white py-8 px-6 text-center"
        >
          <div class="bg-white/20 p-4 rounded-full inline-block mb-4">
            <i class="fas fa-camera text-3xl"></i>
          </div>
          <h2 class="text-2xl font-bold mb-2">Upload Gambar Daun Kentang</h2>
          <p class="opacity-90">
            Pilih atau seret foto daun kentang untuk analisis mendalam
          </p>
        </div>

        <form
          id="upload-form"
          method="POST"
          enctype="multipart/form-data"
          class="p-8"
        >
          <div
            id="upload-area"
            class="border-2 border-dashed border-primary-200 rounded-xl p-8 text-center cursor-pointer mb-6 transition-all duration-300 hover:border-primary-400 hover:bg-primary-50"
          >
            <i
              class="fas fa-cloud-upload-alt text-4xl text-primary-400 mb-4"
            ></i>
            <p class="text-gray-600 mb-2 font-medium">
              Seret gambar ke sini atau klik untuk memilih
            </p>
            <p class="text-sm text-gray-500">Format: JPG, PNG (Maks. 5MB)</p>
            <input
              type="file"
              name="image"
              id="file-input"
              required
              accept=".jpg,.jpeg,.png"
              class="hidden"
            />
          </div>

          <div id="preview-container" class="hidden mb-6 text-center">
            <img
              id="image-preview"
              class="max-h-64 mx-auto rounded-lg shadow-md"
            />
            <button
              type="button"
              id="remove-preview"
              class="mt-3 text-red-500 hover:text-red-700 text-sm font-medium transition-colors"
            >
              <i class="fas fa-times mr-1"></i> Hapus Gambar
            </button>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <button
              type="submit"
              id="analyze-btn"
              class="bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white font-semibold py-3 px-6 rounded-full transition-all duration-300 flex items-center justify-center shadow-md hover:shadow-lg"
            >
              <i class="fas fa-search mr-2"></i> Analisis Sekarang
            </button>
            <button
              type="button"
              onclick="resetDetection()"
              class="bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-3 px-6 rounded-full transition-all duration-300 flex items-center justify-center"
            >
              <i class="fas fa-redo mr-2"></i> Reset Deteksi
            </button>
          </div>
        </form>
      </div>

      <!-- Hasil Deteksi -->
      {% if prediction %}
      <div
        id="resultBox"
        class="mt-12 bg-white rounded-2xl p-8 shadow-soft transition-all duration-300 hover:shadow-medium animate-slide-up"
      >
        <div class="text-center mb-8">
          <h2 class="text-2xl font-bold text-primary-800 mb-2">
            Hasil Analisis
          </h2>
          <div
            class="w-20 h-1 bg-gradient-to-r from-primary-500 to-primary-600 mx-auto rounded-full"
          ></div>
        </div>

        <div
          class="flex flex-col md:flex-row items-center md:items-start gap-8"
        >
          <div class="flex-1 text-center">
            <div class="relative inline-block">
              <img
                src="data:image/png;base64,{{ image_data }}"
                class="w-full max-w-xs mx-auto rounded-xl shadow-md"
                alt="Hasil Upload"
              />
              <div
                class="absolute -top-2 -right-2 bg-primary-500 text-white text-xs font-bold py-1 px-2 rounded-full shadow-md"
              >
                Analisis
              </div>
            </div>
          </div>

          <div class="flex-1">
            <div class="mb-6">
              <h3 class="text-xl font-semibold text-gray-800 mb-3">
                Diagnosis:
              </h3>
              <div
                class="inline-flex items-center px-4 py-2 rounded-full text-white font-semibold shadow-md {% if prediction in ['Daun Sehat', 'Healthy'] %}bg-gradient-to-r from-green-500 to-green-600 {% elif prediction in ['Hawar Awal', 'Early Blight'] %}bg-gradient-to-r from-yellow-500 to-yellow-600 {% elif prediction in ['Hawar Akhir', 'Late Blight'] %}bg-gradient-to-r from-red-500 to-red-600 {% else %}bg-gradient-to-r from-blue-500 to-blue-600{% endif %}"
              >
                <i class="fas fa-stethoscope mr-2"></i> {{ prediction or "Tidak
                terdeteksi" }}
              </div>
            </div>

            <div class="mt-8 pt-6 border-t border-gray-200">
              <h3 class="text-xl font-semibold text-gray-800 mb-3">
                Rekomendasi:
              </h3>
              <div class="bg-primary-50 rounded-xl p-4 text-gray-700">
                <p class="mb-2">
                  {% if prediction in ['Daun Sehat', 'Healthy'] %}
                  <i class="fas fa-check-circle text-green-500 mr-2"></i>
                  Tanaman Anda sehat. Lanjutkan perawatan rutin. {% elif
                  prediction in ['Hawar Awal', 'Early Blight'] %}
                  <i
                    class="fas fa-exclamation-triangle text-yellow-500 mr-2"
                  ></i>
                  Gejala awal penyakit terdeteksi. Segera lakukan pencegahan. {%
                  elif prediction in ['Hawar Akhir', 'Late Blight'] %}
                  <i class="fas fa-times-circle text-red-500 mr-2"></i> Penyakit
                  sudah parah. Lakukan penanganan intensif. {% else %}
                  <i class="fas fa-info-circle text-blue-500 mr-2"></i> Kondisi
                  tanaman memerlukan perhatian khusus. {% endif %}
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
      {% endif %}
    </section>

    <!-- Footer -->
    <footer
      class="bg-gradient-to-r from-primary-700 to-primary-800 text-white py-8 mt-16"
    >
      <div class="max-w-6xl mx-auto px-4 text-center">
        <p>
          Â© 2025 AgriDetect. Dibuat dengan
          <i class="fas fa-heart text-red-400 mx-1"></i> untuk petani Indonesia
        </p>
      </div>
    </footer>

    <!-- Scripts -->
    <script src="{{ url_for('static', filename='js/reset.js') }}"></script>
  </body>
</html>
